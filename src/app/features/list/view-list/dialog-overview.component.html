<section class="text-white">
  <div class="flex flex-col gap-2">
    <div>
      <button
        (click)="openDialog()"
        type="button"
        class="cursor-pointer focus:outline. -none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"
      >
        Add Books
      </button>
    </div>

    @if(open()) {
    <!-- modal -->
    <div
      class="absolute top-0 left-0 w-full h-full bg-black/50 flex justify-center items-center z-10"
    >
      <form
        [formGroup]="form"
        (ngSubmit)="AddBook()"
        class="flex flex-col bg-gray-900 max-w-xs w-full rounded-sm"
      >
        <div class="p-4 text-center">
            <h2>{{selectedBook ? 'EDIT BOOK' : 'ADD BOOK'}}</h2>
        </div>
        <hr class="border-gray-200 dark:border-gray-700" />

        <div class="flex flex-col gap-2 items-start p-4">
          <div class="flex flex-col gap-2 w-full">
            <label>Title:</label>
            <input
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="title"
            />
            @if(isRequired('title')) {
            <small class="text-red-500">This field is required</small>
            }
          </div>
          <div class="flex flex-col gap-2 w-full">
            <label>Author:</label>
            <input
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="author"
            />
            @if(isRequired('author')) {
            <small class="text-red-500">This field is required.</small>
            }
          </div>
          <div class="flex flex-col gap-2 w-full">
            <label>Genre:</label>
            <input
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="genre"
            />
            @if(isRequired('genre')) {
            <small class="text-red-500">This field is required</small>
            }
          </div>
          <div class="flex flex-col gap-2 w-full">
            <label>Description:</label>
            <input
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="description"
            />
            @if(isRequired('description')) {
            <small class="text-red-500">This field is required</small>
            }
          </div>
          <div class="flex flex-col gap-2 w-full">
            <label>Score:</label>
            <input
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="score"
            />
            @if(isRequired('score')) {
            <small class="text-red-500">This field is required</small>
            }
          </div>
          <div class="flex flex-col gap-2 w-full">
            <label>Review:</label>
            <textarea
              class="bg-gray-800 border-b-[2px] border-blue-600 rounded-sm px-2 focus:outline-0 focus:border-green-500"
              formControlName="review"
            >
            </textarea>
            @if(isRequired('review')) {
            <small class="text-red-500">This field is required</small>
            }
          </div>
          <div class="flex justify-between w-full">
            <button
              (click)="closeDialog()"
              class="my-2 bg-red-500 cursor-pointer hover:bg-red-600 py-1.5 px-5 rounded-lg text-sm"
              type="button"
            >
              Cancel
            </button>
            <button
              class="my-2 bg-blue-600 cursor-pointer hover:bg-blue-700 py-1.5 px-5 rounded-lg text-sm"
              type="submit"
            >
              {{selectedBook ? 'Update' : 'Submit'}}
            </button>
          </div>
        </div>
      </form>
    </div>

    <!--  end modal -->
    }

    <!-- list book -->
    <h4 class="mt-5">Registered Books:</h4>
    <div class="overflow-hidden rounded-lg">
      <app-table-list-book
      [books]="libros$"
      (editBook)="onEditBook($event)"
      (deleteBook)="deleteBook($event)">
    </app-table-list-book>
    </div>
    <!-- list book -->
  </div>
</section>
